<!DOCTYPE html><html lang="en"><head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Learn to Write Chinese Characters</title>
  <script src="https://cdn.jsdelivr.net/npm/hanzi-writer@3.5.0/dist/hanzi-writer.min.js"></script>
  <style>
    body {
      font-family: 'Comic Sans MS', cursive, sans-serif;
      text-align: center;
      padding: 20px;
      background-color: #fef9e7;
      color: #333;
    }

    h1 {
      margin-bottom: 5px;
      color: #ff6f00;
    }

    h2 {
      color: #3f51b5;
    }

    .input-group {
      margin: 20px auto;
      max-width: 600px;
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 10px;
      flex-wrap: wrap;
    }

    input, select, button {
      padding: 12px;
      font-size: 18px;
      border-radius: 8px;
      border: 2px solid #ffd54f;
    }

    input[type="text"] {
      width: 120px;
      text-align: center;
    }

    select {
      min-width: 160px;
    }

    button {
      background-color: #ffca28;
      color: #000;
      border: none;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }

    button:hover {
      background-color: #ffc107;
    }

    #writer-container {
      position: relative;
      margin: 30px auto 10px;
      width: 300px;
      height: 300px;
      border: 3px solid #ffd54f;
      background-color: white;
      border-radius: 15px;
    }

    #writer {
      width: 100%;
      height: 100%;
    }

    #pronounce-btn {
      position: absolute;
      top: 12px;
      right: 12px;
      font-size: 22px;
      background-color: #4dd0e1;
      border: none;
      border-radius: 50%;
      width: 42px;
      height: 42px;
      cursor: pointer;
      display: flex;
      justify-content: center;
      align-items: center;
      box-shadow: 2px 2px 5px rgba(0,0,0,0.2);
    }

    .info {
      font-size: 22px;
      margin: 5px;
    }

    #error-message,
    #success-message {
      font-size: 18px;
      display: none;
      margin-top: 15px;
      font-weight: bold;
    }

    #error-message {
      color: #d32f2f;
    }

    #success-message {
      color: #388e3c;
    }

    #progress-tracker {
      margin-top: 10px;
      font-size: 18px;
    }

    #progress-tracker h3 {
      margin-bottom: 10px;
    }

    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      20%, 60% { transform: translateX(-5px); }
      40%, 80% { transform: translateX(5px); }
    }

    .shake {
      animation: shake 0.4s ease-in-out;
    }
  </style>
<meta name="apps-name" content="My Web App"></meta></head>
<body>
  <h1>‚úèÔ∏è Learn to Write Chinese Characters</h1>
  <p>Type or choose a character, then tap "Load Character" to begin!</p>

  <div class="input-group">
    <input type="text" id="char-input" maxlength="1" placeholder="ËæìÂÖ•Ê±âÂ≠ó">
    <select id="char-select"></select>
    <button onclick="loadCharacter()">üéØ Load Character</button>
  </div>

  <h2>üñåÔ∏è Stroke Order Animation &amp; Practice</h2>

  <div id="writer-container">
    <div id="writer"></div>
    <button id="pronounce-btn" onclick="pronounceCharacter()">üîä</button>
  </div>

  <div class="info" id="pinyin-display">Pinyin: √†i</div>
  <div class="info" id="meaning-display">Meaning: Love</div>

  <div id="error-message">‚ùå Oops! Try again!</div>
  <div id="success-message">‚úÖ Yay! Perfect strokes!</div>

  <div id="progress-tracker">
    <h3>üìä Progress</h3>
    <div class="info" id="accuracy-display">Accuracy: 0%</div>
    <div class="info" id="streak-display">Perfect Streak: 0</div>
  </div>

  <div id="controls">
    <button onclick="startQuiz()">üìù Practise Writing</button>
    <button onclick="writer.animateCharacter()">‚ñ∂Ô∏è Show Stroke Order</button>
    <button onclick="resetCanvas()">üßΩ</button>
  </div>

  <!-- Error and Success Sound -->
  <audio id="error-sound" src="https://www.soundjay.com/button/beep-07.wav"></audio>
  <audio id="success-sound" src="https://www.soundjay.com/button/beep-09.wav"></audio>

  <script>
    let writer;
    let defaultChar = 'Áà±';

    const dictionary = {
      'Áà±': { pinyin: '√†i', meaning: 'Love' },
      'Â≠¶': { pinyin: 'xu√©', meaning: 'Learn' },
      'Â•Ω': { pinyin: 'h«éo', meaning: 'Good' },
      '‰∏≠': { pinyin: 'zh≈çng', meaning: 'Middle/China' },
      'ÂõΩ': { pinyin: 'gu√≥', meaning: 'Country' },
      '‰∫∫': { pinyin: 'r√©n', meaning: 'Person' },
      'Âæ∑': { pinyin: 'd√©', meaning: 'Virtue' },
      '‰πâ': { pinyin: 'y√¨', meaning: 'Righteousness' },
    };

    const commonChars = 'ÁöÑ‰∏ÄÊòØÂú®‰∏ç‰∫ÜÊúâÂíå‰∫∫Ëøô‰∏≠Â§ß‰∏∫‰∏ä‰∏™ÂõΩÊàë‰ª•Ë¶Å‰ªñÊó∂Êù•Áî®‰ª¨ÁîüÂà∞‰ΩúÂú∞‰∫éÂá∫Â∞±ÂàÜÂØπÊàê‰ºöÂèØ‰∏ªÂèëÂπ¥Âä®ÂêåÂ∑•‰πüËÉΩ‰∏ãËøáÂ≠êËØ¥‰∫ßÁßçÈù¢ËÄåÊñπÂêéÂ§öÂÆöË°åÂ≠¶Ê≥ïÊâÄÊ∞ëÂæóÁªèÂçÅ‰∏â‰πãËøõÁùÄÁ≠âÈÉ®Â∫¶ÂÆ∂ÁîµÂäõÈáåÂ¶ÇÊ∞¥ÂåñÈ´òËá™‰∫åÁêÜËµ∑Â∞èÁâ©Áé∞ÂÆûÂä†ÈáèÈÉΩ‰∏§‰ΩìÂà∂Êú∫ÂΩì‰ΩøÁÇπ‰ªé‰∏öÊú¨ÂéªÊääÊÄßÂ•ΩÂ∫îÂºÄÂÆÉÂêàËøòÂõ†Áî±ÂÖ∂‰∫õÁÑ∂ÂâçÂ§ñÂ§©ÊîøÂõõÊó•ÈÇ£Á§æ‰πâ‰∫ãÂπ≥ÂΩ¢Áõ∏ÂÖ®Ë°®Èó¥Ê†∑‰∏éÂÖ≥ÂêÑÈáçÊñ∞Á∫øÂÜÖÊï∞Ê≠£ÂøÉÂèç‰Ω†ÊòéÁúãÂéüÂèà‰πàÂà©ÊØîÊàñ‰ΩÜË¥®Ê∞îÁ¨¨ÂêëÈÅìÂëΩÊ≠§ÂèòÊù°Âè™Ê≤°ÁªìËß£ÈóÆÊÑèÂª∫ÊúàÂÖ¨Êó†Á≥ªÂÜõÂæàÊÉÖËÄÖÊúÄÁ´ã‰ª£ÊÉ≥Â∑≤ÈÄöÂπ∂ÊèêÁõ¥È¢òÂÖöÁ®ãÂ±ï‰∫îÊûúÊñôË±°ÂëòÈù©‰ΩçÂÖ•Â∏∏ÊñáÊÄªÊ¨°ÂìÅÂºèÊ¥ªËÆæÂèäÁÆ°Áâπ‰ª∂ÈïøÊ±ÇËÄÅÂ§¥Âü∫ËµÑËæπÊµÅË∑ØÁ∫ßÂ∞ëÂõæÂ±±ÁªüÊé•Áü•ËæÉÂ∞ÜÁªÑËßÅËÆ°Âà´Â•πÊâãËßíÊúüÊ†πËÆ∫ËøêÂÜúÊåáÂá†‰πùÂå∫Âº∫ÊîæÂÜ≥Ë•øË¢´Âπ≤ÂÅöÂøÖÊàòÂÖàÂõûÂàô‰ªªÂèñÊçÆÂ§ÑÈòüÂçóÁªôËâ≤ÂÖâÈó®Âç≥‰øùÊ≤ªÂåóÈÄ†ÁôæËßÑÁÉ≠È¢Ü‰∏ÉÊµ∑Âè£‰∏úÂØºÂô®ÂéãÂøó‰∏ñÈáëÂ¢û‰∫âÊµéÈò∂Ê≤πÊÄùÊúØÊûÅ‰∫§ÂèóËÅî‰ªÄËÆ§ÂÖ≠ÂÖ±ÊùÉÊî∂ËØÅÊîπÊ∏ÖÂ∑±ÁæéÂÜçÈááËΩ¨Êõ¥ÂçïÈ£éÂàáÊâìÁôΩÊïôÈÄüËä±Â∏¶ÂÆâÂú∫Ë∫´ËΩ¶‰æãÁúüÂä°ÂÖ∑‰∏áÊØèÁõÆËá≥ËææËµ∞ÁßØÁ§∫ËÆÆÂ£∞Êä•ÊñóÂÆåÁ±ªÂÖ´Á¶ªÂçéÂêçÁ°Æ‰º†ÊùêÈ©¨Âéø.'

    let totalStrokes = 0;
    let correctStrokes = 0;
    let perfectStreak = 0;
    let currentMistakes = 0;

    function populateDropdown() {
      const select = document.getElementById('char-select');
      for (let char of commonChars) {
        const option = document.createElement('option');
        option.value = char;
        option.textContent = char;
        select.appendChild(option);
      }
    }

    function initWriter(character) {
      document.getElementById('writer').innerHTML = '';
      writer = HanziWriter.create('writer', character, {
        width: 300,
        height: 300,
        padding: 5,
        showOutline: true,
        strokeAnimationSpeed: 1,
        strokeHighlightSpeed: 2,
        delayBetweenStrokes: 500,
        drawingColor: '#000000',
        strokeColor: '#ff7043',
        outlineColor: '#90caf9',
        highlightColor: '#ef5350'
      });
      startQuiz();
    }

    function loadCharacter() {
      const input = document.getElementById('char-input').value.trim();
      const select = document.getElementById('char-select').value;
      const char = input || select || defaultChar;

      const info = dictionary[char];
      document.getElementById('pinyin-display').textContent = `Pinyin: ${info ? info.pinyin : 'Unknown'}`;
      document.getElementById('meaning-display').textContent = `Meaning: ${info ? info.meaning : 'Not in dictionary'}`;

      document.getElementById('error-message').style.display = 'none';
      document.getElementById('success-message').style.display = 'none';

      initWriter(char);
    }

    function startQuiz() {
      document.getElementById('error-message').style.display = 'none';
      document.getElementById('success-message').style.display = 'none';
      currentMistakes = 0;

      writer.quiz({
        onMistake: function () {
          currentMistakes++;
          totalStrokes++;
          document.getElementById('error-message').style.display = 'block';
          document.getElementById('error-sound').play();
          document.getElementById('writer-container').classList.add('shake');
          setTimeout(() => {
            document.getElementById('writer-container').classList.remove('shake');
          }, 400);  // Duration of shake
          updateProgress();
        },
        onCorrectStroke: function () {
          correctStrokes++;
          totalStrokes++;
          document.getElementById('error-message').style.display = 'none';
          updateProgress();
        },
        onComplete: function (summaryData) {
          if (summaryData.totalMistakes === 0) {
            document.getElementById('success-message').style.display = 'block';
            document.getElementById('success-sound').play();
            perfectStreak++;
          } else {
            perfectStreak = 0;
          }
        }
      });
    }

    function resetCanvas() {
      writer.hideCharacter();
      writer.showOutline();
      document.getElementById('error-message').style.display = 'none';
      document.getElementById('success-message').style.display = 'none';
      updateProgress();
    }

    function pronounceCharacter() {
      const input = document.getElementById('char-input').value.trim();
      const select = document.getElementById('char-select').value;
      const char = input || select || defaultChar;

      const utterance = new SpeechSynthesisUtterance(char);
      utterance.lang = 'zh-CN';
      speechSynthesis.speak(utterance);
    }

    function updateProgress() {
      const accuracy = totalStrokes > 0 ? Math.round((correctStrokes / totalStrokes) * 100) : 0;
      document.getElementById('accuracy-display').textContent = `Accuracy: ${accuracy}%`;
      document.getElementById('streak-display').textContent = `Perfect Streak: ${perfectStreak}`;
    }

    window.onload = () => {
      populateDropdown();
      loadCharacter();
    };
  </script>


</body></html>